function scopeCallback(e,t){return function(n){t.call(e,n)}}define("kandlguides/controller/page",[],function(){var e=function(e){this.options=e||{},this.options.controllers=this.options.controllers||[],this.options.config=this.options.config||{}};return e.prototype.init=function(){for(var e=this,t=function(t){var n=new t(e.options.config);n.init()},n=0;n<this.options.controllers.length;n++)require([this.options.controllers[n]],t)},e}),define("kandlcommon/common",[],function(){function e(){}return String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{windowWidth:function(){return Math.max(this.documentElementWidth(),this.windowInnerWidth()||0)},documentElementWidth:function(){return document.documentElement.clientWidth},windowInnerWidth:function(){return window.innerWidth},isMobile:function(){return this.windowWidth()<=599},isMobilePortrait:function(){return this.windowWidth()<=399},isMobileLandscape:function(){return this.windowWidth()>399&&this.windowWidth()<=599},isTablet:function(){return this.windowWidth()>599&&this.windowWidth()<=1007},isDesktop:function(){return this.windowWidth()>1007},isIE:function(){return document.documentMode?document.documentMode:!1},cutsMustard:function(){return"querySelector"in document&&"localStorage"in window&&"addEventListener"in window},hasClass:function(e,t){var n=new RegExp("(?:^| |\n)("+t+")(?: |$|\n)");return n.test(e.className)},addClass:function(e,t){if(e.classList)return e.classList.add(t);if(!this.hasClass(e,t)){var n=e.className;n+=" "+t,e.className=n.trim()}},removeClass:function(e,t){if(e){if(e.classList)return e.classList.remove(t);e.className=e.className.replace(t,"")}},toggleClass:function(e,t){return e.classList?e.classList.toggle(t):void(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},mapDomNodeList:function(e,t){var n,i;for(n=0,i=e.length;i>n;n+=1)t(e[n])},addEvents:function(e,t,n){for(var i=0;i<e.length;i++)this.addEvent(e[i],t,n)},addEvent:function(e,t,n){n||(n=window),n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t)},removeEvent:function(e,t,n){n||(n=window),n.removeEventListener?n.removeEventListener(e,t,!1):n.detachEvent&&n.detachEvent("on"+e,t)},fireEvent:function(e,t,n){if(n||(n=window),document.createEvent){var i=document.createEvent("Event");if(i.initEvent(e,!1,!1),"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);n.dispatchEvent(i)}},getElementPosition:function(e){var t=0,n=0,i=e.offsetHeight,o=e.offsetWidth;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;while(e);return{top:n,left:t,bottom:n+i,right:t+o}},getScrollY:function(){return window.scrollY||window.pageYOffset},getStyleProperty:function(e,t){if(window.getComputedStyle)return window.getComputedStyle(e).getPropertyValue(t);for(var n="",i=!1,o=0;o<t.length;o++)"-"===t[o]?i=!0:i?(n+=t[o].toUpperCase(),i=!1):n+=t[o];return e.currentStyle[n]},mergeConfig:function(e,t){var n,i={};for(n in e)i[n]=e[n];if("undefined"!=typeof t)for(n in t)i[n]=t[n];return i},extend:function(t,n){e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n},forceOnTopOfMediaPlayer:function(e){var t=document.createElement("iframe");t.className="iframeshim",t.setAttribute("frameborder",0),t.setAttribute("scrolling","no"),t.setAttribute("allowTransparency","true"),t.setAttribute("tabindex",-1),t.setAttribute("src",'javascript:""'),e.appendChild(t)},collectionHas:function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},findParentBySelector:function(e,t){for(var n=document.querySelectorAll(t),i=e.parentNode;i&&!this.collectionHas(n,i);)i=i.parentNode;return i},getHtmlTag:function(){return document.getElementsByTagName("html")[0]},css3TransitionsSupported:function(){var e=!1,t="Webkit Moz O ms Khtml".split(" "),n=document.createElement("div");if(n.style.animationName)return!0;for(var i=0;i<t.length;i++)if(void 0!==n.style[t[i]+"AnimationName"]){e=!0;break}return e}}}),define("kandlguides/module/iStatsHelper",["istats-1"],function(e){var t=function(){};return t.prototype={logEvent:function(t,n,i,o){e.log(t,n,i,o)},trackArea:function(t,n){if("region"in n&&!("push"in n.region)){for(var i=[],o=0;o<n.region.length;o++)i.push(n.region[o]);n.region=i}e.track(t,n)}},t}),define("text",["module"],function(e){var t,n,i,o,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,p=c&&(location.port||void 0),h={},m=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,i,o=!1,r=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!a||r>1)?(t=e.substring(0,r),n=e.substring(r+1,e.length)):t=e,i=n||t,r=i.indexOf("!"),-1!==r&&(o="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:t=i),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,o){var r,a,s,l=t.xdRegExp.exec(e);return l?(r=l[2],a=l[3],a=a.split(":"),s=a[1],a=a[0],!(r&&r!==n||a&&a.toLowerCase()!==i.toLowerCase()||(s||a)&&s!==o)):!0},finishLoad:function(e,n,i,o){i=n?t.strip(i):i,m.isBuild&&(h[e]=i),o(i)},load:function(e,n,i,o){if(o&&o.isBuild&&!o.inlineText)return void i();m.isBuild=o&&o.isBuild;var r=t.parseName(e),a=r.moduleName+(r.ext?"."+r.ext:""),s=n.toUrl(a),l=m.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void i():void(!c||l(s,d,u,p)?t.get(s,function(n){t.finishLoad(e,r.strip,n,i)},function(e){i.error&&i.error(e)}):n([a],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,i)}))},write:function(e,n,i){if(h.hasOwnProperty(n)){var o=t.jsEscape(h[n]);i.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,i,o,r){var a=t.parseName(n),s=a.ext?"."+a.ext:"",l=a.moduleName+s,c=i.toUrl(a.moduleName+s)+".js";t.load(l,i,function(){var n=function(e){return o(c,e)};n.asModule=function(e,t){return o.asModule(e,c,t)},t.write(e,l,n,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var o=n.readFileSync(e,"utf8");0===o.indexOf("ï»¿")&&(o=o.substring(1)),t(o)}catch(r){i&&i(r)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,n,i,o){var r,a=t.createXhr();if(a.open("GET",e,!0),o)for(r in o)o.hasOwnProperty(r)&&a.setRequestHeader(r.toLowerCase(),o[r]);m.onXhr&&m.onXhr(a,e),a.onreadystatechange=function(){var t,o;4===a.readyState&&(t=a.status||0,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=a,i&&i(o)):n(a.responseText),m.onXhrComplete&&m.onXhrComplete(a,e))},a.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,o="utf-8",r=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),l="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(a),n.append(i);l=String(n.toString())}finally{s.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,s,l={};r&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(s,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),a.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),t(l.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!kandlguides-i18n/cy.xml",[],function(){return"<language xmlns=\"http://www.bbc.co.uk/guides/i18n\">\n    <slideshow>\n        <next>Nesaf</next>\n        <previous>Blaenorol</previous>\n    </slideshow>\n    <media>\n        <transcript>Trawsgrifiad</transcript>\n        <script>Sgript</script>\n        <nojavascript>Mae angen JavaScript er mwyn gweld y fideo yma.</nojavascript>\n    </media>\n    <single-question>\n        <choose>Dewis</choose>\n        <start>Dechrau</start>\n        <next>Nesaf</next>\n        <previous>Blaenorol</previous>\n    </single-question>\n    <activity>\n        <nojavascript>Mae angen JavaScript er mwyn gweld y cynnwys yma.</nojavascript>\n        <nomustard>Mae'r cynnwys yma'n defnyddio technoleg sydd ddim yn cael ei gefnogi gan eich porwr presennol. Beth am gael fersiwn newydd o'r porwr?</nomustard>\n        <error>Dyw'r cynnwys yma ddim yn gweithio</error>\n    </activity>\n    <vote>\n        <nojavascript>Mae angen JavaScript er mwyn gweld y bleidlais yma.</nojavascript>\n    </vote>\n    <rcp>\n        <subscription>Tanysgrifiad</subscription>\n    </rcp>\n    <language-picker>\n        <languages>Ieithoedd</languages>\n    </language-picker>\n</language>"}),define("text!kandlguides-i18n/en.xml",[],function(){return'<language xmlns="http://www.bbc.co.uk/guides/i18n">\n    <slideshow>\n        <next>Next</next>\n        <previous>Previous</previous>\n    </slideshow>\n    <media>\n        <transcript>Transcript</transcript>\n        <script>Script</script>\n        <nojavascript>Javascript is required to view this video.</nojavascript>\n    </media>\n    <single-question>\n        <choose>Choose</choose>\n        <start>Start</start>\n        <next>Next</next>\n        <previous>Previous</previous>\n    </single-question>\n    <activity>\n        <nojavascript>JavaScript is required to view this activity.</nojavascript>\n        <nomustard>This content uses functionality that is not supported by your current browser. Consider upgrading your browser.</nomustard>\n        <error>This content doesn\'t seem to be working</error>\n    </activity>\n    <vote>\n        <nojavascript>JavaScript is required to view this vote.</nojavascript>\n    </vote>\n    <rcp>\n        <subscription>Subscription</subscription>\n    </rcp>\n    <language-picker>\n        <languages>Languages</languages>\n    </language-picker>\n</language>'}),define("text!kandlguides-i18n/ga.xml",[],function(){return'<language xmlns="http://www.bbc.co.uk/guides/i18n">\n    <slideshow>\n        <next>Ar aghaidh</next>\n        <previous>Roimhe</previous>\n    </slideshow>\n    <media>\n        <transcript>Tras-scrÃ­bhinn</transcript>\n        <script>Script</script>\n        <nojavascript>TÃ¡ JavaScript de dhÃ­th leis an fhÃ­seÃ¡n seo a fheiceÃ¡il.</nojavascript>\n    </media>\n    <single-question>\n        <choose>Roghnaigh</choose>\n        <start>Tosaigh</start>\n        <next>Ar aghaidh</next>\n        <previous>Roimhe</previous>\n    </single-question>\n    <activity>\n        <nojavascript>TÃ¡ JavaScript de dhÃ­th leis an ghnÃ­omhaÃ­ocht seo a fheiceÃ¡il.</nojavascript>\n        <nomustard>ÃsÃ¡ideann an t-Ã¡bhar seo feidhmiÃºlacht nach dtacaÃ­onn do bhrabhsÃ¡laÃ­ lÃ©i. Smaoinigh ar do bhrabhsÃ¡laÃ­ a nuashonrÃº.</nomustard>\n        <error>Is cosÃºil nach bhfuil an t-inneachar seo ag obair</error>\n    </activity>\n    <vote>\n        <nojavascript>TÃ¡ JavaScript de dhÃ­th leis an vÃ³ta seo a fheiceÃ¡il.</nojavascript>\n    </vote>\n    <rcp>\n        <subscription>SÃ­ntiÃºs</subscription>\n    </rcp>\n    <language-picker>\n        <languages>Teangacha</languages>\n    </language-picker>\n</language>'}),define("text!kandlguides-i18n/gd.xml",[],function(){return'<language xmlns="http://www.bbc.co.uk/guides/i18n">\n    <slideshow>\n        <next>Air adhart</next>\n        <previous>Air ais</previous>\n    </slideshow>\n    <media>\n        <transcript>Riochd sgrÃ¬obhte</transcript>\n        <script>Sgriobt</script>\n        <nojavascript>Feumar Javascript airson am bhidio seo fhaicinn.</nojavascript>\n    </media>\n    <single-question>\n        <choose>Tagh</choose>\n        <start>TÃ²isich</start>\n        <next>Air adhart</next>\n        <previous>Air ais</previous>\n    </single-question>\n    <activity>\n        <nojavascript>Feumar Javascript airson seo fhaicinn.</nojavascript>\n        <nomustard>Chan eil seo ag obair ri linn âs nach eil e aâ faighinn an taic a tha dhÃ¬th bhon bhrobhsair agad.  Bu chÃ²ir do bhrobhsair Ã¹rachadh.</nomustard>\n        <error>Chan eil seo ag obair</error>\n    </activity>\n    <vote>\n        <nojavascript>Feumar Javascript airson am bhÃ²t seo fhaicinn.</nojavascript>\n    </vote>\n    <rcp>\n        <subscription>ClÃ radh</subscription>\n    </rcp>\n    <language-picker>\n        <languages>CÃ nain</languages>\n    </language-picker>\n</language>'}),define("kandlguides/module/i18n",["text!kandlguides-i18n/cy.xml","text!kandlguides-i18n/en.xml","text!kandlguides-i18n/ga.xml","text!kandlguides-i18n/gd.xml"],function(e,t,n,i){var o={en:t,cy:e,ga:n,gd:i};return{getParsedLanguage:function(e){var t,n=o[e];if(window.DOMParser){var i=new DOMParser;t=i.parseFromString(n,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n);return t}}}),define("kandlguides/component/activity",["kandlcommon/common","kandlguides/module/iStatsHelper","kandlguides/module/i18n"],function(e,t,n){function i(e){e=e.replace(/\/$/,"");var t="kandlguides-activity-custom"+e.substr(e.lastIndexOf("/"));this.baseUrl=e,this.moduleName=t+"/main";var n={};n[t]=this.baseUrl+"/",require.config({paths:n})}var o=function(i,o){o=o||{},this.element=i,this.container=i.querySelector(".k-g-activity-container"),this.moduleName=i.getAttribute("data-activity-module"),this.baseUrl=i.getAttribute("data-activity-baseurl"),this.iStats=new t,this.clickCount=0,this.language=o.language||"en",this.translation=n.getParsedLanguage(this.language),this.element.activityObject=this;var r=this;e.addEvent("click",function(e){e.preventDefault(),r.clickCount++,1===r.clickCount&&r.iStats.logEvent("activity_clicked","activity_module")},this.container)};return o.prototype.initialise=function(e){var t=this;e&&i.call(t,e),require([this.moduleName],function(e){"undefined"==typeof e?t.displayError():e.init({container:t.container,baseUrl:t.baseUrl})},function(){t.displayError()})},o.prototype.geti18n=function(e){return this.translation.querySelector("activity "+e).textContent},o.prototype.displayError=function(){var t=document.createElement("p");t.innerHTML=this.geti18n("error");var n=document.createElement("div");e.addClass(n,"k-g-activity-error"),n.appendChild(t),this.element.appendChild(n),this.container.style.display="none"},o}),define("kandlguides/controller/activity",["kandlguides/component/activity","kandlcommon/common"],function(e,t){var n=function(e){this.config=e||{}};return n.prototype.init=function(){if(t.cutsMustard())for(var n=document.querySelectorAll(".k-g-legacy-activity"),i=0;i<n.length;i++){var o=new e(n[i],{language:this.config.language});"true"!==this.config.suppressActivities&&o.initialise()}},n}),define("kandlguides/component/adverts",["kandlcommon/common"],function(e){return{init:function(){window.bbcdotcom&&window.bbcdotcom.show&&(window.bbcdotcom.show(),e.addEvent("resize_complete",function(){window.bbcdotcom.reset()}))}}}),define("kandlguides/behaviour/debouncedResize",["kandlcommon/common"],function(e){return{init:function(){var t=null;e.addEvent("resize",function(){clearTimeout(t),t=setTimeout(function(){e.fireEvent("resize_complete")},200)})}}}),define("kandlguides/controller/adverts",["kandlguides/component/adverts","kandlguides/behaviour/debouncedResize"],function(e,t){var n=function(){};return n.prototype.init=function(){t.init(),e.init()},n}),define("kandlguides/component/introduction",["kandlcommon/common"],function(e){var t,n=function(n,i,o){t=this,this.introMediaElement=n,this.introVideo=i,this.introImage=o,this.introVideo.bind("initialised",function(){t.showVideo()}),this.introVideo.bind("error",function(){t.showVideo()}),e.addEvent("guides_title_stuck",this.updateVideoPosition,window),e.addEvent("guides_title_unstuck",this.updateVideoPosition,window),e.addEvent("guides_title_collapsed",this.updateVideoPosition,window)};return n.prototype.showVideo=function(){this.introImage.destroy();var n=this.introMediaElement.querySelector(".k-g-int-v");null!==n&&(n.style.backgroundImage=""),e.addClass(t.introMediaElement,"playing"),e.fireEvent("guides_title_collapse",{component:"introduction_video"}),e.fireEvent("guides_scroll_to_step",{stepNum:1})},n.prototype.updateVideoPosition=function(n){if(e.hasClass(t.introMediaElement,"playing")){var i=n.titleComponent.height()+n.titleComponent.mastheadHeight();t.introMediaElement.style.paddingTop=i+"px"}},n}),define("kandlcommon/responsiveImage",["kandlcommon/common"],function(e){function t(){return e.isMobile()?"mobile":e.isTablet()?"tablet":"desktop"}try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}var i=function(e,t){this.recipe=t.recipe,this.sizes=t.sizes,this.bestFitAlgorithm=t.bestFitAlgorithm&&"function"==typeof t.bestFitAlgorithm?t.bestFitAlgorithm:this.nearestMatchingRecipe,t.backgroundImage?(this.imageElem=new Image,this.backgroundImage=e):this.imageElem=e,this.container=t.container||e};return i.prototype.init=function(){var t=this;this.handleResize(),this.resizeFunction=function(){t.handleResize()},this.currentWidth=void 0,e.addEvent("load",this.resizeFunction),e.addEvent("resize",this.resizeFunction),e.addEvent("update_recipe",this.resizeFunction,this.imageElem)},i.prototype.destroy=function(){e.removeEvent("load",this.resizeFunction),e.removeEvent("resize",this.resizeFunction),e.removeEvent("update_recipe",this.resizeFunction,this.imageElem)},i.prototype.handleResize=function(){var e=this.getBestRecipeFit();if(null!==e){var t=this.recipe.replace("$recipe",e);this.imageElem.src!==t&&(this.imageElem.src=t,this.backgroundImage&&(this.backgroundImage.style.backgroundImage='url("'+t+'")'))}},i.prototype.getBestRecipeFit=function(){var e=this.container.clientWidth;return e===this.currentWidth?null:(this.currentWidth=e,this.bestFitAlgorithm())},i.prototype.nearestMatchingRecipe=function(){var e,t=1/0;for(var n in this.sizes)if(this.sizes.hasOwnProperty(n)){var i=Math.abs(this.currentWidth-n);t>i&&(e=this.sizes[n],t=i)}return e},i.prototype.isMinimumBelowCurrent=function(e,t,n){return e>t&&n>=e},i.prototype.isMinimumAvailable=function(e,t,n){return e>n&&(t>e||t===-1/0)},i.prototype.minimumMatchingRecipe=function(){var e,t,n=-1/0;for(var i in this.sizes)this.sizes.hasOwnProperty(i)&&(e=parseInt(i),(this.isMinimumBelowCurrent(e,n,this.currentWidth)||this.isMinimumAvailable(e,n,this.currentWidth))&&(n=e,t=this.sizes[n]));return t},i.prototype.deviceMatchingRecipe=function(){return this.sizes[t()]},i}),define("kandl/mediaPlayer/i18n/mediaPlayer",[],function(){return{en:{failedLoad:"This content has failed to load. Please check your internet connection and try again.",noFlash:'You need to have Flash to play this content. You can get it from <a href="http://www.adobe.com/go/getflashplayer">here</a>.',play:"Play"},cy:{failedLoad:"Dyw'r chwaraewr fideo ddim wedi llwytho. Ydi'r cysylltiad Ã¢'r we yn gweithio'n iawn?",noFlash:"Mae'n rhaid cael Flash er mwyn chwarae'r fideo yma. Gallwch ei gael <a href=\"http://www.adobe.com/go/getflashplayer\">yma</a>.",play:"Dechrau"},ga:{failedLoad:"Theip ar lÃ³dÃ¡il an tseinnteora fÃ­se. SeiceÃ¡il do cheangal idirlÃ­n agus triail arÃ­s Ã© le do thoil.",noFlash:'TÃ¡ Flash de dhÃ­th ort leis an fhÃ­seÃ¡n seo a sheinm. Is fÃ©idir theacht air <a href="http://www.adobe.com/go/getflashplayer">anseo</a>.',play:"Tosaigh"},gd:{failedLoad:"Cha do luchdaich do chluicheadair bhidio. Thoir sÃ¹il air do cheangal lÃ¬n agus feuch a-rithist.",noFlash:'Feumaidh tu Flash airson am bhidio seo a chluich. Gheibhear <a href="http://www.adobe.com/go/getflashplayer">an seo e</a>.',play:"TÃ²isich"}}}),define("kandl/mediaPlayer/mediaPlayer",["kandlcommon/common","kandlcommon/responsiveImage","kandl/mediaPlayer/i18n/mediaPlayer"],function(e,t,n){function i(t){var n=document.createElement("button");n.innerHTML=t.getI18n("play"),t.container.appendChild(n),e.addEvent("click",function(){t.activate(!0)},t.container)}function o(n,i){var o,r=n.container.querySelector(".emp-placeholder");null!==r&&"IMG"!==r.tagName&&(r=r.querySelector("img")),null===r&&(r=document.createElement("img"),e.addClass(r,"emp-placeholder"),n.container.appendChild(r)),o=n.container.getAttribute("data-poster-template"),n.responsiveImage=new t(r,{recipe:o,sizes:i}),n.responsiveImage.init()}function r(e){var t=e.querySelector(".emp-fallback");null!==t&&t.parentNode.removeChild(t)}function a(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}return"#"===e[0]?7===e.length?e:4===e.length?s(e):"#ffffff":(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)/),null===e?"#ffffff":"#"+t(e[1])+t(e[2])+t(e[3]))}function s(e){var t=e.replace("#",""),n=t[0],i=t[1],o=t[2];return"#"+n+n+i+i+o+o}function l(e,t){return function(){t.apply(e,arguments)}}function c(e){var t=e.container.getBoundingClientRect();return t.bottom<=window.innerHeight&&t.bottom>0||t.top<=window.innerHeight&&t.top>0}function d(t){var n=c(t);setTimeout(function(){c(t)&&n&&(e.removeEvent("load",t.scrollHandler),e.removeEvent("scroll",t.scrollHandler),e.removeEvent("resize",t.scrollHandler),t.activate(!1))},200)}function u(){var e="";return e=this.responsiveImage?this.responsiveImage.recipe:this.container.getAttribute("data-poster-template"),e.replace("$recipe","{recipe}")}var p={createPlaceholder:!0,mediaBaseUrl:"http://www.bbc.co.uk/iplayer/playlist/",overrideCta:!1,posterSizes:{640:"640x360"},language:"en",embed:!1},h=function(t,n){this.container=t,this.activated=!1,this.configuration=e.mergeConfig(p,n),this.bindQueue=[],this.bumpPlayer=null,this.inFullScreen=!1,i(this),r(t),this.configuration.createPlaceholder&&o(this,this.configuration.posterSizes)};return h.prototype.lazyActivate=function(){var t=this;this.scrollHandler=function(){d(t)},e.addEvent("load",this.scrollHandler),e.addEvent("scroll",this.scrollHandler),e.addEvent("resize",this.scrollHandler),d(t)},h.prototype.destroy=function(){e.removeEvent("load",this.scrollHandler),e.removeEvent("scroll",this.scrollHandler),e.removeEvent("resize",this.scrollHandler),this.responsiveImage.destroy()},h.prototype.activate=function(t){var n=this;this.activated||(n.activated=!0,require(["bump-3"],function(i){var o=n.configuration.mediaBaseUrl+n.container.getAttribute("data-pid"),r=n.container.getAttribute("data-version-pid"),s=n.container.querySelector("button"),c=a(e.getStyleProperty(s,"background-color")),d={product:"sport",mediaProfile:"pc",playerProfile:"smp",autoplay:t,responsive:!0,superResponsive:!0,ui:{colour:c,embed:{enabled:n.configuration.embed},foreColour:"#333333",hideDefaultErrors:!0,touchScroll:{enabled:!0},locale:{lang:n.configuration.language}},configVars:{showShareButton:!0},playlistObject:{items:[{kind:n.configuration.kind,vpid:r}],legacyPlaylist:o}};d.overrideHoldingImage=d.playlistObject.holdingImageUrl=u.call(n),n.configuration.overrideCta&&(d.ui.cta={enabled:!0,custom:n.configuration.overrideCta}),void 0!==n.configuration.insideIframe&&(d.insideIframe=n.configuration.insideIframe);var p=n.configuration.daxComscore;p&&(d.appName=p.appName,d.appType=p.appType,d.counterName=p.counterName),n.bumpPlayer=i(n.container).player(d),n.bumpPlayer.poster(n.container.getAttribute("data-poster-template").replace("$recipe","640x360")),n.bumpPlayer.bind("error",function(e){n.playerError(e)}),n.bumpPlayer.bind("touchScroll",function(e){n.touchScroll(e)}),n.bumpPlayer.bind("fullscreenEnter",function(){void 0!==n.configuration.fullscreenEnter&&n.configuration.fullscreenEnter(),n.inFullScreen=!0}),n.bumpPlayer.bind("fullscreenExit",function(){void 0!==n.configuration.fullscreenExit&&n.configuration.fullscreenExit(),n.inFullScreen=!1});for(var h=0;h<n.bindQueue.length;h++)n.bumpPlayer.bind(n.bindQueue[h].event,l(n,n.bindQueue[h].callback));n.bumpPlayer.load(),e.addClass(n.container,"playing"),void 0!==n.responsiveImage&&n.responsiveImage.destroy(),e.fireEvent("media_playing",{mediaPlayer:n})},function(){var e="<p>"+n.getI18n("failedLoad")+"</p>",t="bump-failed";n.error(e,t)}))},h.prototype.getI18n=function(e){return n[this.configuration.language][e]},h.prototype.touchScroll=function(e){this.inFullScreen||window.scrollBy(0,e.eventData)},h.prototype.error=function(e,t){var n=document.createElement("div");n.className=t+" emp-fallback",n.innerHTML=e,this.container.appendChild(n),this.container.removeChild(this.container.querySelector("button"))},h.prototype.noFlash=function(){var e="<p>"+this.getI18n("noFlash")+"</p>",t="no-flash";this.error(e,t)},h.prototype.playerError=function(e){6010===e.errorData.code()&&this.noFlash()},h.prototype.bind=function(e,t){this.activated?this.bumpPlayer.bind(e,l(this,t)):this.bindQueue.push({event:e,callback:t})},h}),define("kandlguides/component/mediaPlayer",["kandl/mediaPlayer/mediaPlayer","kandlcommon/common","kandlguides/module/iStatsHelper"],function(e,t,n){var i=new n,o=function(t,n){e.call(this,t,n),this.bind("playing",this.logWithiStats)};return t.extend(e,o),o.prototype.logWithiStats=function(){var e="";t.hasClass(this.container.parentNode,"video")?(e="video",t.hasClass(this.container.parentNode,"k-g-int-v")&&(e="intro_"+e)):e="audio",i.logEvent("av_"+e,"play_clicked")},o}),define("kandlguides/controller/introduction",["kandlguides/component/introduction","kandlguides/component/mediaPlayer","kandlcommon/responsiveImage","kandlcommon/common"],function(e,t,n,i){function o(e){var t=document.querySelector(".k-g-introduction-media > *");if(null===t)return null;var i=new n(t,{backgroundImage:!0,recipe:e.replace("$pid",t.getAttribute("data-pid")),sizes:{0:"400x400",416:"704x396",608:"1008xn",1008:"1600xn"}});return i.init(),i}function r(e){var n=document.querySelector(".k-g-int-v .emp");return null===n?null:new t(n,e)}var a=function(e){this.config=e||{},this.imageRecipe=this.config.image&&this.config.image.recipe?this.config.image.recipe:""};return a.prototype.init=function(){this.mediaElement=document.querySelector(".k-g-introduction-media"),this.mediaElement&&null===this.mediaElement.querySelector(".content-unavailable")&&(this.image=o(this.imageRecipe),this.video=r(i.mergeConfig(this.config.media,{createPlaceholder:!1,language:this.config.language||""})),null!==this.video&&(this.component=new e(this.mediaElement,this.video,this.image)))},a}),define("kandlguides/data/responsiveImageRecipes",[],function(){for(var e={},t={},n={},i={},o=1248,r=16;o>r;r+=16)e[r]=r+"xn",t[r]=r+"x"+r,n[r]=r+"x"+r/16*9,r%32===0&&(i[r]=r+"xn");return{infographics:{240:"small",496:"medium",976:"large"},maintainAspect:e,square:t,widescreen:n,slideshow:i}}),define("kandlguides/controller/media",["kandlguides/component/mediaPlayer","kandlguides/data/responsiveImageRecipes","kandlcommon/common"],function(e,t,n){function i(t,i){for(var o=0;o<t.length;o++){var r=new e(t[o],i);n.cutsMustard()?r.lazyActivate():r.activate()}}var o=function(e){this.config=e||{}};return o.prototype.init=function(){var e=n.mergeConfig(this.config.media,{language:this.config.language,posterSizes:t.widescreen,embed:!0}),o=document.querySelectorAll(".k-g-gs-v.video .emp");i(o,e);var r=document.querySelectorAll(".k-g-gs-v.audio .emp"),a="";this.config.media&&this.config.media.audioCta&&(a=this.config.media.audioCta),i(r,n.mergeConfig(e,{overrideCta:a,kind:"audio"}))},o}),define("kandlguides/component/guide",["kandlcommon/common","kandlguides/module/iStatsHelper"],function(e,t){function n(e){var t={".k-g-activity-step":"activity",".k-g-stp-com":"comparison",".k-g-stp-infographic":"infographic",".k-g-guide-stp-media":"media",".k-g-guide-stp-question":"question",".k-g-end":"end",".k-g-guide-stp-vote":"vote",".k-g-guide-stp-slideshow":"slideshow"};for(var n in t)if(e.querySelector(n))return t[n];return"narrative"}var i,o,r,a=function(e){var t,n;for(r.steps=[],r.stepIndexes={},"undefined"==typeof e&&(e=[]),n=0;n<e.length;n++)t=e[n].querySelector(".k-g-stp-anchor"),r.steps.push({element:e[n],anchor:t,id:t.id,viewed:!1}),r.stepIndexes[t.id]=n},s=function(t){return e.getElementPosition(r.steps[t].element)},l=function(n){r=this,o=new t,a(n),this.activeStep=this.calculateActiveStep(),this.logWithiStats({activeStep:this.activeStep}),this.complete=!1,e.addEvent("touchmove",this.guideScrolled,window),e.addEvent("scroll",this.guideScrolled,window),e.addEvent("guides_step_changed",this.logWithiStats)};l.prototype.calculateActiveStep=function(){var t,n,i,o=s(0);if(e.getScrollY()<=o.top)return r.steps[0];var a=s(r.steps.length-1);if(e.getScrollY()>=a.top)return r.steps[r.steps.length-1];for(i=0;i<r.steps.length;i++)if(t=r.steps[i].element,n=s(i),!(n.bottom<e.getScrollY())){var l=n.bottom-e.getScrollY(),c=t.offsetHeight/2;if(!(c>l))return r.steps[i]}},l.prototype.guideScrolled=function(){var t=r.calculateActiveStep();r.activeStep!==t&&(r.activeStep=t,e.fireEvent("guides_step_changed",{activeStep:t}))},l.prototype.getStepById=function(e){return r.steps[r.stepIndexes[e]]},l.prototype.getStepIdByNum=function(e){return this.steps[e-1].id};var c=function(){var e=!1;if(!r.steps)return!1;for(var t=0;t<r.steps.length;t++)e=r.steps[0].viewed===r.steps[t].viewed;return e?r.steps[0].viewed:void 0},d=function(t){var i,a=r.stepIndexes[t.id]+1;i=e.hasClass(t.element,"k-g-introduction")?"introduction":n(t.element),o.logEvent("view","step_loaded",{step_type:"step_"+i,step_number:"step_number_"+a})},u=function(){o.logEvent("guide","guide-completed")};return l.prototype.logWithiStats=function(e){var t=e.activeStep;t.viewed||(clearTimeout(i),i=setTimeout(function(){t.viewed=!0,d(t),c()&&(r.complete=!0,u())},2e3))},l}),define("kandlguides/component/navigation",["kandlcommon/common","kandlguides/module/iStatsHelper"],function(e,t){var n,i,o,r=function(t){for(var o=t.querySelectorAll("li"),r=0;r<o.length;r++){var a=o[r].querySelector("a"),s=a.hash.split("#")[1];"undefined"==typeof i[s]&&(i[s]=[]),i[s].push(o[r]),e.addEvent("click",n.selectStep,a)}},a=function(t){var n;for(var o in i)for(n=0;n<i[o].length;n++)o===t.id?e.addClass(i[o][n],"k-g-gn-active"):e.removeClass(i[o][n],"k-g-gn-active")},s=function(){var e=document.querySelector(".k-guide");if(e){var t,n=document.querySelector(".k-guide").className,i=n.split(" ");i.shift(),t=i.join(" "),document.querySelector("#panelWrapper").className+=" ",document.querySelector("#panelWrapper").className+=t}},l=function(){return n.button?e.hasClass(n.button,"open"):!1},c=function(){var e=parseFloat(window.getComputedStyle(document.querySelector(".k-g-gtb h1")).height),t=window.innerHeight-e;n.panelNavList.style.height=t+"px"},d=function(l,c,d,u,p){n=this,o=new t;var h=document.createElement("div");e.addClass(h,"k-g-gn-panel"),document.querySelector("body").appendChild(h),c.parentNode.removeChild(c),h.appendChild(c),i={},r(c),r(d),e.addEvent("click",this.togglePanel,u),e.addEvent("guides_step_changed",this.stepChanged,window),e.addEvent("click",function(e){e.target!==n.panelNavList&&n.closePanel()},window),e.addEvent("resize",this.forceUnstick),e.addEvent("orientationchange",this.forceUnstick),a(l.activeStep),this.guide=l,this.panelNavList=c,this.secondaryNavList=d,this.button=u,this.header=p,this.overlay=h;var m=h.parentNode,g=document.createElement("div");g.id="panelWrapper",m.replaceChild(g,h),g.appendChild(h),s(),e.addEvent("guides_title_resized",this.updateOverlayPosition),e.addEvent("guides_title_stuck",this.updateOverlayPosition,window),e.addEvent("guides_title_collapsed",this.updateOverlayPosition,window),e.addEvent("media_playing",this.createIFrame,window)
};return d.prototype.openPanel=function(){e.addClass(n.overlay,"open"),e.addClass(n.button,"open");var t=document.documentElement;e.addClass(t,"overlay"),e.fireEvent("guides_title_stick",{component:"navigation_overlay"}),e.fireEvent("guides_title_collapse",{component:"navigation_overlay"}),c(),e.addEvent("resize",c),e.addEvent("orientationchange",c)},d.prototype.closePanel=function(){window.removeEventListener("resize",c),window.removeEventListener("orientationchange",c),e.removeClass(n.overlay,"open"),e.removeClass(n.button,"open");var t=document.documentElement;e.removeClass(t,"overlay"),e.fireEvent("guides_title_unstick",{component:"navigation_overlay"}),e.fireEvent("guides_title_expand",{component:"navigation_overlay"})},d.prototype.createIFrame=function(){e.forceOnTopOfMediaPlayer(n.header),e.forceOnTopOfMediaPlayer(n.panelNavList)},d.prototype.togglePanel=function(t){t.preventDefault(),t.stopPropagation(),l()?(n.button.innerText="Open navigator",n.closePanel()):(n.button.innerText="Close navigator",n.openPanel()),e.fireEvent("resize",null),e.fireEvent("orientationchange",null)},d.prototype.selectStep=function(){o.logEvent("navigation_bar","menu_navigation"),e.fireEvent("scroll",null),n.closePanel()},d.prototype.stepChanged=function(e){a(e.activeStep)},d.prototype.updateOverlayPosition=function(t){e.hasClass(n.overlay,"open")&&(n.overlay.style.top=t.titleComponent.height()+"px",n.overlay.style.height="100%")},d.prototype.forceUnstick=function(){e.hasClass(n.overlay,"open")&&(e.isMobile()||e.isTablet()||n.closePanel())},d}),define("kandlguides/behaviour/stepNavigation",["kandlcommon/common"],function(e){var t=function(t){var n=this;this.guide=t,e.addEvent("guides_scroll_to_step",function(e){void 0!==e.stepNum?n.navigateToStepByNumber(e.stepNum):void 0!==e.stepId&&n.navigateToStepById(e.stepId)},window),e.addEvent("orientationchange",function(){var t=n.guide.calculateActiveStep();e.fireEvent("guides_scroll_to_step",{stepId:t.id})},window)};return t.prototype.navigateToStepByNumber=function(e){this.navigateToStepById(this.guide.getStepIdByNum(e))},t.prototype.navigateToStepById=function(t){var n=this.guide.getStepIdByNum(1),i=this.guide.getStepById(t);t!==n&&void 0!==i&&(e.fireEvent("guides_title_stick"),e.fireEvent("guides_title_collapse")),void 0===i&&(t=n,i=this.guide.getStepById(t)),window.location.hash="#"+t;var o=document.querySelector(".k-g-header"),r=e.getElementPosition(i.element).top-o.offsetHeight;window.scroll(0,r)},t}),define("kandlguides/controller/navigation",["kandlguides/component/guide","kandlguides/component/navigation","kandlguides/behaviour/stepNavigation","kandlcommon/common"],function(e,t,n,i){var o=function(){};return o.prototype.init=function(){var o=document.querySelectorAll(".k-g-stp-container"),r=document.querySelectorAll(".k-g-gn");this.guide=new e(o),r.length>0&&i.cutsMustard()&&(this.navigation=new t(this.guide,document.querySelector(".k-g-footer .k-g-gn"),document.querySelector(".k-g-header .k-g-gn"),document.querySelector(".k-g-header .k-g-gn-drop"),document.querySelector(".k-g-header")),this.stepNavigation=new n(this.guide))},o}),define("kandlcommon/iStatsHelper",["istats-1"],function(e){var t=function(){};return t.prototype={logEvent:function(t,n,i,o){e.log(t,n,i,o)},trackArea:function(t,n){if("region"in n&&!("push"in n.region)){for(var i=[],o=0;o<n.region.length;o++)i.push(n.region[o]);n.region=i}e.track(t,n)}},t}),define("kandl/iwonderPromoPanel",["kandlcommon/common","kandlcommon/iStatsHelper","kandlcommon/responsiveImage"],function(e,t,n){var i=function(e){this.istats=new t,this.container=e,this.responsiveImages=[]};return i.prototype.init=function(){if(this.initIstatsLinkTracking(),this.initResponsiveImages(),e.cutsMustard()){this.layout(),this.resizePromoContainer();var t=this;this.resizeListener=function(){t.layout(),t.resizePromoContainer()},e.addEvent("resize",this.resizeListener)}},i.prototype.go=function(e){window.location=e},i.prototype.initIstatsLinkTracking=function(){function t(t){return e.hasClass(t,"k-iwonder-promo")||e.hasClass(t,"k-timeline-promo")}function n(e){return e.match(/http(s)?:\/\/(.*\.)?bbc.co(\.uk|m)/)}function i(i){i.preventDefault();var o="A"==i.target.tagName?i.target:e.findParentBySelector(i.target,"a"),a="external_promo";t(o.parentNode)?a="iwonder_promo":n(o.href)&&(a="internal_promo"),r.istats.logEvent(a,"promo_clicked",{},function(){r.go(o.href)})}for(var o=this.container.querySelectorAll(".k-iwonder-promo a, .k-timeline-promo a, .k-gel-promo a"),r=this,a=0;a<o.length;a++)e.addEvent("click",i,o[a])},i.prototype.layout=function(){for(var t=this.container.querySelectorAll(".promo-2, .promo-4, .promo-6"),n=1;n<t.length;n++)if(e.isDesktop())t[n].style.top="";else{var i=parseFloat(window.getComputedStyle(t[n-1]).marginTop),o=t[n-1].offsetTop+t[n-1].offsetHeight+i,r=t[n].offsetTop;""!==t[n].style.top&&(r-=parseFloat(t[n].style.top)),t[n].style.top=o-r+"px"}},i.prototype.resizePromoContainer=function(){var t=this.container.parentNode;if(e.isDesktop())t.style.height=null,t.style.overflow=null;else{for(var n=this.container.querySelectorAll(".k-promo-panel > div"),i=e.getElementPosition(n[0]).bottom,o=1;o<n.length;o++)e.getElementPosition(n[o]).bottom>i&&(i=e.getElementPosition(n[o]).bottom);t.style.height=i-e.getElementPosition(t).top+"px",t.style.overflow="hidden"}},i.prototype.initResponsiveImages=function(){this.initResponsiveImagesFromNodeList(this.container.querySelectorAll(".k-gel-promo .media img"),{160:"160x90",240:"240x135",320:"320x180",400:"400x225"}),this.initResponsiveImagesFromNodeList(this.container.querySelectorAll(".k-iwonder-promo .media img"),{160:"160x160",240:"240x240",320:"320x320",400:"400x400"}),this.initResponsiveImagesFromNodeList(this.container.querySelectorAll(".k-timeline-promo .media img"),{80:"160x160",160:"240x240",240:"320x320",320:"400x400"})},i.prototype.initResponsiveImagesFromNodeList=function(e,t){for(var i=0;i<e.length;i++){var o=new n(e[i],{recipe:e[i].getAttribute("data-image-recipe"),sizes:t});o.init(),this.responsiveImages.push(o)}},i.prototype.destroy=function(){e.removeEvent("resize",this.resizeListener),this.responsiveImages.forEach(function(e){e.destroy()})},i}),define("kandlguides/controller/relatedContentPanel",["kandl/iwonderPromoPanel","kandlcommon/common"],function(e,t){var n=function(){};return n.prototype.init=function(){if(t.cutsMustard()){var n=document.querySelector(".k-promo-panel"),i=new e(n);i.init()}},n}),define("kandlguides/controller/responsiveImages",["kandlcommon/common","kandlcommon/responsiveImage","kandlguides/data/responsiveImageRecipes"],function(e,t,n){var i=function(e){this.config="undefined"!=typeof e?e:{}};return i.prototype.init=function(){for(var i,o=document.querySelectorAll("img.resp"),r=this.getConfig("image","recipe"),a=this.getConfig("infographic","recipe"),s=0;s<o.length;s++){i={},e.hasClass(o[s],"infographic")?(i.recipe=a.replace("$pid",o[s].getAttribute("data-pid")),i.sizes=n.infographics,i.bestFitAlgorithm=t.prototype.minimumMatchingRecipe):i.sizes=e.hasClass(o[s],"square")?n.square:e.hasClass(o[s],"widescreen")?n.widescreen:n.maintainAspect,i.recipe=i.recipe||r.replace("$pid",o[s].getAttribute("data-pid"));var l=new t(o[s],i);l.init()}},i.prototype.getConfig=function(){for(var e=Array.prototype.slice.call(arguments),t=this.config,n=0;n<e.length;n++){if(!t.hasOwnProperty(e[n]))return null;t=t[e[n]]}return t},i}),define("kandlguides/component/indicator",["kandlcommon/common"],function(e){var t,n=function(e,n){t=this,this.container=e,this.numberOfIndicators=n,this.initialise()};return n.prototype.initialise=function(){this.active=0,this.items=[],this.element=document.createElement("ul"),e.addClass(this.element,"k-g-indicator"),this.container.appendChild(this.element),this.render(),this.update()},n.prototype.render=function(){for(var t=0;t<this.numberOfIndicators;t++){var n=document.createElement("li");this.items.push(n),e.addClass(n,"item"),this.element.appendChild(n)}},n.prototype.update=function(){for(var t=0;t<this.items.length;t++)e.removeClass(this.items[t],"active"),t===this.active&&e.addClass(this.items[t],"active")},n.prototype.next=function(){this.active<this.numberOfIndicators-1&&this.active++,this.update()},n.prototype.previous=function(){this.active>0&&this.active--,this.update()},n}),define("kandlguides/component/singleStepQuestion",["kandlcommon/common","kandlguides/module/iStatsHelper","kandlguides/component/indicator","kandlguides/module/i18n"],function(e,t,n,i){function o(e,t){for(var n=e.parentNode;null===n.querySelector(t)&&"body"!==n.nodeName.toLowerCase();)n=n.parentNode;return n.querySelector(t)}function r(){var t=document.createElement("a");t.innerHTML=this.geti18n("start")+"<span/>",e.addClass(t,"k-link-button"),e.addClass(t,"internal"),e.addClass(t,"k-type-body-index"),e.addEvent("click",scopeCallback(this,h.prototype.activate),t);var i=document.createElement("div");e.addClass(i,"k-g-gs-cta-box"),i.appendChild(t),this.header.appendChild(i);var o=document.createElement("a");o.innerHTML=this.geti18n("next"),o.href="#",e.addClass(o,"k-g-gs-sq-next"),e.addEvent("click",scopeCallback(this,h.prototype.nextOption),o),this.optionsContainer.appendChild(o);var r=document.createElement("a");r.innerHTML=this.geti18n("previous"),r.href="#",e.addClass(r,"k-g-gs-sq-previous"),e.addEvent("click",scopeCallback(this,h.prototype.previousOption),r),this.optionsContainer.appendChild(r),this.optionIndicator=new n(this.container,this.revealOptions.length)}function a(t){for(var n=t.querySelectorAll(".answer a"),i=0;i<n.length;i++)e.addEvent("click",scopeCallback(this,h.prototype.revealHandler),n[i])}function s(e){if(!(e>2)){var t="answer_clicked";2===e&&(t="answer_changed"),p.logEvent(t,"question_module")}}function l(t){s(++u);for(var n=0;n<this.revealOptions.length;n++)e.removeClass(this.revealOptions[n],"reveal");e.addClass(t,"reveal"),e.fireEvent("panel_revealed",null,t)}function c(){for(var t=0;t<this.revealOptions.length;t++)e.removeClass(this.revealOptions[t],"active");e.addClass(this.revealOptions[this.activeOption],"active"),this.activeOption===this.revealOptions.length-1?e.addClass(this.container,"last-active"):e.removeClass(this.container,"last-active")}var d,u,p,h=function(n,s){s=s||{},d=this,d.container=n,d.header=n.querySelector(".k-g-gs-sq-header"),d.optionsContainer=n.querySelector(".k-g-gs-sq-options"),d.revealOptions=n.querySelectorAll(".k-g-gs-sq-option-container"),d.stepNumber=o(d.container,".k-g-gs-sn"),d.language=s.language||"en",d.translation=i.getParsedLanguage(d.language),d.activeOption=0,u=0,p=new t,e.addClass(this.revealOptions[0],"active"),r.call(this),a.call(this,n)};return h.prototype.revealHandler=function(t){t.preventDefault();var n=e.findParentBySelector(t.target,".k-g-gs-sq-option-container");l.call(this,n)},h.prototype.nextOption=function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.activeOption<this.revealOptions.length-1&&(this.activeOption++,this.optionIndicator.next(),c.call(this))},h.prototype.previousOption=function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.activeOption>0?(this.activeOption--,this.optionIndicator.previous(),c.call(this)):this.deactivate()},h.prototype.activate=function(){e.addClass(this.container,"active"),e.addClass(this.stepNumber,"active"),this.ctaClicked||(p.logEvent("cta_clicked","question_module"),this.ctaClicked=!0)},h.prototype.deactivate=function(){e.removeClass(this.container,"active"),e.removeClass(this.stepNumber,"active")},h.prototype.geti18n=function(e){return this.translation.querySelector("single-question "+e).textContent},h}),define("kandlguides/controller/singleQuestion",["kandlguides/component/singleStepQuestion","kandlcommon/common"],function(e,t){var n=".k-g-gs-sq",i=".k-g-gs-sq-option-container",o=function(e){this.config=e||{}};return o.prototype.init=function(){if(t.cutsMustard())for(var o=document.querySelectorAll(n),r=function(){t.fireEvent("update_recipe",null,this.querySelector("img.resp"))},a=0;a<o.length;a++){new e(o[a],{language:this.config.language});for(var s=o[a].querySelectorAll(i),l=0;l<s.length;l++)t.addEvent("panel_revealed",r,s[l])}},o}),define("kandlguides/component/slideshowControl",["kandlcommon/common","hammer"],function(e,t){function n(){e.addEvent("click",this.handleNext.bind(this),this.next),e.addEvent("click",this.handleBack.bind(this),this.back),e.addEvent("click",this.handleNext.bind(this),this.element),e.addEvent("click",this.handleNext.bind(this),this.inner)}function i(){this.hammer=new t(this.element);var n=this.slideshow;this.hammer.on("swipeleft",function(){e.fireEvent("nextImage",{},n)}),this.hammer.on("swiperight",function(){e.fireEvent("prevImage",{},n)})}var o=16/9,r=8,a=16,s=function(e){this.slideshow=e,this.element=this.slideshow.querySelector(".k-g-gs-is-controls"),this.inner=this.slideshow.querySelector(".k-g-gs-is-inner"),this.next=this.element.querySelector(".next"),this.next.storedTitle=this.next.title,this.back=this.element.querySelector(".back"),this.back.storedTitle=this.back.title,this.element.style.display="block",n.call(this),i.call(this),this.resize()};return s.prototype.resize=function(){var t=this.element.offsetWidth;t-=e.isMobile()?r:a;var n=t/o;this.element.style.height=n+"px"},s.prototype.setOffset=function(e){this.element.style.top=e+"px"},s.prototype.getHeight=function(){return this.next.clientHeight},s.prototype.handleNext=function(t){t.preventDefault(),t.stopPropagation(),e.fireEvent("nextImage",null,this.slideshow)},s.prototype.handleBack=function(t){t.preventDefault(),t.stopPropagation(),e.fireEvent("prevImage",null,this.slideshow)},s.prototype.enableNext=function(){this.enableButton(this.next)},s.prototype.enableBack=function(){this.enableButton(this.back)},s.prototype.enableButton=function(t){t.title=t.storedTitle,t.tabIndex=0,e.removeClass(t,"disabled")},s.prototype.disableBack=function(){this.disableButton(this.back)},s.prototype.disableNext=function(){this.disableButton(this.next)},s.prototype.disableButton=function(t){e.addClass(t,"disabled"),t.title="",t.tabIndex=-1},s}),define("kandlguides/component/slideshow",["kandlcommon/common","kandlcommon/responsiveImage","kandlguides/data/responsiveImageRecipes","kandlguides/component/slideshowControl","kandlguides/component/indicator","kandlguides/module/iStatsHelper"],function(e,t,n,i,o,r){function a(){var e=l.call(this),t=c.call(this);s(t),s(this.images[this.currentImageIndex]),s(e)}function s(t){t.initialised||(t.init(),t.initialised=!0,e.addEvent("load",t.handleResize.bind(t),t.imageElem))}function l(){return this.images[u.call(this)]}function c(){return this.images[d.call(this)]}function d(){return this.currentImageIndex-1<0?this.images.length-1:this.currentImageIndex-1}function u(){return this.currentImageIndex+1>this.images.length-1?0:this.currentImageIndex+1}function p(){for(var e,t=this.element.querySelectorAll(".k-g-gs-i"),n=0;e=t[n];n++){var i=e.querySelector(".k-g-gs-i-meta");i&&e.removeChild(i);var o=h.call(this,e);o.metaElement=i,this.images.push(o)}}function h(e){var i=e.querySelector("img.slideshow-resp"),o=i.getAttribute("data-pid"),r={recipe:this.config.image.recipe.replace("$pid",o),sizes:n.slideshow},a=new t(i,r);return a.element=e,a}function m(){E.call(this);for(var t,n=0;t=this.images[n];n++)this.currentImageIndex===n?e.removeClass(t.element,"hidden"):e.addClass(t.element,"hidden"),e.removeClass(t.element,"next"),e.removeClass(t.element,"previous");var i=l.call(this),o=c.call(this);e.addClass(i.element,"next"),e.addClass(o.element,"previous"),this.indicator.active=this.currentImageIndex,this.indicator.update(),b.call(this)}function g(){this.animating||(this.currentImageIndex=u.call(this),m.call(this),v.call(this),a.call(this))}function f(){this.animating||(this.currentImageIndex=d.call(this),m.call(this),v.call(this),a.call(this))}function v(){y.call(this),k.call(this)}function y(){this.slideshowViewed||(this.istats.logEvent("slideshow_viewed","slideshow_module"),this.slideshowViewed=!0)}function k(){this.allImagesViewed||(this.viewedImages[this.currentImageIndex]=!0,Object.keys(this.viewedImages).length===this.images.length&&(this.istats.logEvent("slideshow_completed","slideshow_module"),this.allImagesViewed=!0))}function w(){this.controls.resize(),this.images.filter(function(e){return e.initialised}).forEach(function(e){e.handleResize()})}function b(){for(var e=this.images[this.currentImageIndex].metaElement;this.metaPlaceholder.firstChild;)this.metaPlaceholder.removeChild(this.metaPlaceholder.firstChild);e&&this.metaPlaceholder.appendChild(e)}function E(){e.css3TransitionsSupported()&&!this.animating&&(this.controls.disableNext(),this.controls.disableBack(),this.animating=!0,clearTimeout(this.unstickButtons),this.unstickButtons=setTimeout(S.bind(this),1e3))}function S(){this.controls.enableNext(),this.controls.enableBack(),this.animating=!1}function C(){e.addEvent("nextImage",g.bind(this),this.element),e.addEvent("prevImage",f.bind(this),this.element),e.addEvent("resize",w.bind(this)),e.addEvent("webkitTransitionEnd",S.bind(this),this.element),e.addEvent("transitionEnd",S.bind(this),this.element),e.addEvent("transitionend",S.bind(this),this.element),e.addEvent("msTransitionEnd",S.bind(this),this.element)}var x=function(e,t){this.config=t,this.element=e,this.element.style.display="block",this.images=[],this.currentImageIndex=0,this.viewedImages={},this.metaPlaceholder=this.element.querySelector(".k-g-gs-is-meta-placeholder"),this.unstickButtons=null,p.call(this)};return x.prototype.init=function(){this.controls=new i(this.element),this.indicator=new o(this.element,this.images.length),this.istats=new r,a.call(this),m.call(this),C.call(this),k.call(this)},x}),define("kandlguides/controller/slideshow",["kandlcommon/responsiveImage","kandlguides/component/slideshow","kandlguides/data/responsiveImageRecipes","kandlcommon/common"],function(e,t,n,i){function o(e){for(var n=document.querySelectorAll(".k-g-gs-is"),i=0;i<n.length;i++){var o=new t(n[i],e);o.init()}}function r(t){var i=document.querySelectorAll(".k-g-gs-is img.slideshow-resp"),o="",r="";t.image&&t.image.recipe&&(o=t.image.recipe);for(var a=0;a<i.length;a++){r=o.replace("$pid",i[a].getAttribute("data-pid"));var s=new e(i[a],{recipe:r,sizes:n.maintainAspect});s.init()}}var a=function(e){this.config=e||{}};return a.prototype.init=function(){i.cutsMustard()?o(this.config):r(this.config)},a}),define("kandlguides/component/stepLink",["kandlcommon/common","istats-1"],function(e,t){function n(e){this.element=e}function i(e){return e.match(/http(s)?:\/\/(.*\.)?bbc.co(\.uk|m)/)}function o(e){e.preventDefault();var n=this.element.href,o=i(n)?"internal":"external";t.log(o+"_link","link_clicked",{},function(){this.go(n)}.bind(this))}return n.prototype.init=function(){e.addEvent("click",o.bind(this),this.element)},n.prototype.go=function(e){window.location=e},n}),define("kandlguides/controller/stepLink",["kandlcommon/common","kandlguides/component/stepLink"],function(e,t){function n(){}return n.prototype.init=function(){for(var e=document.querySelectorAll(".k-g-gs-l a"),n=0;n<e.length;n++){var i=new t(e[n]);i.init()}},n}),define("kandlguides/component/stickyTitle",["kandlcommon/common"],function(e){function t(e){for(var t in e)if(e[t]===!0)return!0;return!1}function n(e,t,n){"undefined"==typeof t&&(t="_generic"),e[t]=n}function i(e,t){n(c,e,t)}function o(e,t){n(d,e,t)}function r(){for(var t=function(t){t.preventDefault();var n=this.href.split("#")[1];e.fireEvent("guides_scroll_to_step",{stepId:n})},n=0;n<u.length;n++){var i=u[n];e.addEvent("click",t,i)}}function a(){if(window.location.hash){var t=window.location.hash.split("#")[1];setTimeout(function(){e.fireEvent("guides_scroll_to_step",{stepId:t})},150)}}var s,l=[],c=[],d=[],u=[],p="stuck",h="collapsed",m=function(t){s=this,this.element=t,this.originalOffset=e.getElementPosition(t).top,l=document.querySelectorAll(".k-g-stp-anchor"),c=[],d=[],u=document.querySelectorAll(".k-g-gn li a"),r(),e.addEvent("guides_title_stick",this.onStick),e.addEvent("guides_title_unstick",this.onUnstick),e.addEvent("guides_title_collapse",this.onCollapse),e.addEvent("guides_title_expand",this.onExpand),e.addEvent("touchmove",this.processScroll),e.addEvent("scroll",this.processScroll),e.addEvent("resize",this.onResize),e.addEvent("orientationchange",this.onResize),a(),this.processScroll()};return m.prototype.processScroll=function(){s.hasScrolledPastElement()?(e.fireEvent("guides_title_stick"),e.fireEvent("guides_title_collapse")):s.hasScrolledPastElement()||(e.fireEvent("guides_title_unstick"),e.fireEvent("guides_title_expand"))},m.prototype.onStick=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.component?s.stick(e.component):s.stick()},m.prototype.stick=function(t){var n=s.isStuck();i(t,!0),n||(e.addClass(s.element,p),s.redrawElement(s.element),e.fireEvent("guides_title_stuck",{titleComponent:s}))},m.prototype.onUnstick=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.component?s.unstick(e.component):s.unstick()},m.prototype.unstick=function(t){var n=!s.isStuck();i(t,!1),n||s.isStuck()||(e.removeClass(s.element,p),s.redrawElement(s.element),e.fireEvent("guides_title_unstuck",{titleComponent:s}))},m.prototype.onCollapse=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.component?s.collapse(e.component):s.collapse()},m.prototype.collapse=function(t){var n=s.isCollapsed();o(t,!0),n||(e.addClass(s.element,h),e.fireEvent("guides_title_collapsed",{titleComponent:s}))},m.prototype.onExpand=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.component?s.expand(e.component):s.expand()},m.prototype.expand=function(t){var n=!s.isCollapsed();o(t,!1),n||s.isCollapsed()||(e.removeClass(s.element,h),e.fireEvent("guides_title_expanded",{titleComponent:s}))},m.prototype.hasScrolledPastElement=function(){return e.getScrollY()>=s.originalOffset},m.prototype.height=function(){return s.element.offsetHeight},m.prototype.mastheadHeight=function(){return s.element.offsetTop},m.prototype.isStuck=function(){return t(c)},m.prototype.isCollapsed=function(){return t(d)},m.prototype.onResize=function(){e.fireEvent("guides_title_resized",{titleComponent:s})},m.prototype.redrawElement=function(e){setTimeout(function(){e.style.display="table",setTimeout(function(){e.style.display="block"},1)},1)},m}),define("kandlguides/behaviour/titleStickingPoint",["kandlcommon/common"],function(e){var t,n="k-g-transparent",i=function(n,i){t=this,this.headerElement=n,this.introContentElement=i,this.isHeaderElementTransparent=!1,e.addEvent("scroll",this.processScroll,window),e.addEvent("touchmove",this.processScroll,window),e.addEvent("guides_intro_media_obscured",this.applyTransparency,window),e.addEvent("guides_intro_media_unobscured",this.removeTransparency,window),this.processScroll()};return i.prototype.processScroll=function(){t.isAboveIntroContent()&&!t.isHeaderElementTransparent?e.fireEvent("guides_intro_media_obscured",{stepNum:1}):!t.isAboveIntroContent()&&t.isHeaderElementTransparent&&e.fireEvent("guides_intro_media_unobscured",{stepNum:1})},i.prototype.isAboveIntroContent=function(){var n=e.getElementPosition(t.headerElement),i=t.introContentElement.getBoundingClientRect();return n.bottom<=i.top},i.prototype.applyTransparency=function(){e.addClass(t.headerElement,n),t.isHeaderElementTransparent=!0},i.prototype.removeTransparency=function(){e.removeClass(t.headerElement,n),t.isHeaderElementTransparent=!1},i}),define("kandlguides/controller/title",["kandlguides/component/stickyTitle","kandlguides/behaviour/titleStickingPoint","kandlcommon/common"],function(e,t,n){var i=function(){};return i.prototype.init=function(){var i=document.querySelector(".k-g-header"),o=document.querySelector(".k-g-introduction-content");n.cutsMustard()&&(i&&new e(i),i&&o&&new t(i,o))},i}),define("kandlguides/module/userMonitoring",["echo","kandlcommon/common"],function(e,t){function n(e){var t="http://data.bbc.co.uk/v1/analytics-echo-chamber-inbound/rum";return{rum:{enabled:!0,counterName:e,baseUrl:t},dax:{enabled:!1,baseUrl:"http://d.bbc.co.uk/echochamber/comscore"}}}var i=function(i,o){o=o||{};var r=n(i),a=t.mergeConfig(r,o),s={};s[e.ConfigKeys.RUM.URL]=a.rum.baseUrl,s[e.ConfigKeys.RUM.ENABLED]=a.rum.enabled,s[e.ConfigKeys.COMSCORE.URL]=a.dax.baseUrl,s[e.ConfigKeys.COMSCORE.ENABLED]=a.dax.enabled,this.config=a,this.config.rum.counterName=this.config.rum.counterName||i,this.echo=new e.EchoClient(i,e.Enums.ApplicationType.WEB,s)};return i.prototype.init=function(){this.echo.viewEvent(this.config.rum.counterName+".page.show")},i}),define("kandlguides/controller/userMonitoring",["kandlguides/module/userMonitoring"],function(e){var t=function(e){this.appName="kandlguides",this.config=e};return t.prototype.init=function(){this.userMonitoring=new e(this.appName,this.config.echo),this.userMonitoring.init()},t}),define("kandlguides/component/vote",["kandlcommon/common"],function(e){var t,n,i=document.querySelectorAll('input[type="radio"]'),o=function(n){this.element=t=n,e.addEvent("click",this.handleVoteClick.bind(this),this.element)};o.prototype.handleVoteClick=function(t){var n=t||window.event,i=n.target||n.srcElement;e.hasClass(i,"ivote-form__row--submit")&&i.querySelector(".vote-button").click()};var r=function(){t.className+=" selection-made"};for(n=0;n<i.length;n++)e.addEvent("change",r,i[n]);return o}),define("kandlguides/controller/vote",["kandlguides/component/vote"],function(e){var t=function(){};return t.prototype.init=function(){for(var t=document.querySelectorAll(".k-g-gs-vot"),n=0;n<t.length;n++)new e(t[n])},t}),define("kandlguides/component/openGamesActivity",["embed/freeze","kandlcommon/common"],function(e,t){var n=function(e){this.activity=e,this.gamesId=e.getAttribute("data-gid"),this.activityContainer=e.querySelector(".k-g-og-activity-container")};return n.prototype.init=function(){var n={frameContainerId:this.activityContainer.id,overrideLauncherImagePid:this.activity.getAttribute("data-poster-pid")};t.isMobile()?(n.forceSize="full_screen",n.exitGameUrl=document.URL):n.forceSize="in_page",e(this.gamesId,n),t.isMobile()||t.addClass(this.activityContainer,"embedded")},n}),define("kandlguides/controller/openGamesActivity",["kandlguides/component/openGamesActivity","kandlcommon/common"],function(e,t){var n=function(e){this.config=e||{},this.activities=[]};return n.prototype.init=function(){if(t.cutsMustard())for(var n,i=document.querySelectorAll(".k-g-og-activity"),o=0;n=i[o];o++){var r=new e(n);r.init(),this.activities.push(r)}},n});
//# sourceMappingURL=page.js.map